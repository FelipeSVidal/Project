#!/bin/sh
LOTUS_HOME="$(dirname "$0")"
LOTUS_JAR=`find -maxdepth 1 -name "lotus-app-*.jar"`
LOTUS_EXTENSIONS_PATH=$LOTUS_HOME/extensions

if [ "$1" = "--debug" ]; then
	DEBUG="-Xdebug -Xnoagent -Djava.compiler=NONE -Xrunjdwp:transport=dt_socket,server=y,suspend=y,address=5005"
fi

if [ -n "$JAVA_HOME" ]; then
	JAVA_CMD="$JAVA_HOME/bin/java"
else
	JAVA_CMD="java"
fi

$JAVA_CMD $DEBUG -Dlotus.extensions.path="$LOTUS_EXTENSIONS_PATH" -jar "$LOTUS_HOME/$LOTUS_JAR" "$@"
